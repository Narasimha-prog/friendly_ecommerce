
handling exceptions
----------------
Controller
   â†“
Application Service
   â†“
Domain (Entity / VO)
   âŒ throws InvalidEmailException
   â†‘
Application catches (optional)
   â†‘
Controller maps â†’ 400 Bad Request


value Objects
------------
Compare Entity vs Value Object (this is key)
ğŸ”¹ Entity

Identity = ID

Properties can change

Equality = ID-based

User(id=123, email=a@b.com)
User(id=123, email=c@d.com)  // SAME entity

ğŸ”¹ Value Object

Identity = all its properties

Immutable

Equality = value-based

Email("a@b.com") â‰  Email("c@d.com")
Address("A", "B", "C", "D") â‰  Address("A", "B", "X", "D")


Change any property â†’ itâ€™s a different value


Entities have identity â€” the identity itself is often a Value Object.
=========================
User u1 = new User(new UserId(uuid1));
User u2 = new User(new UserId(uuid1));

u1.equals(u2); // true (same identity)


Typical User Aggregate (realistic)
User
 â”œâ”€ UserId        (VO)
 â”œâ”€ Name          (VO)
 â”œâ”€ Email         (VO)
 â”œâ”€ Password      (VO)
 â”œâ”€ Address       (VO)
 â””â”€ Status        (enum)


This is not overengineering â€” this is standard DDD.


[Your Application / System Logs] â†’ [Logstash] â†’ [Elasticsearch] â†’ [Kibana]


mvn clean verify sonar:sonar \
  -Dsonar.projectKey=friendly_ecommerce \
  -Dsonar.host.url=http://localhost:9000 \
  -Dsonar.login=sqp_3f33e2412f61a8796a8457af11bd0c0e0e77309b



  mvn clean verify sonar:sonar \
    -Dsonar.login=sqp_72b495fa33256b05d6766bb9314b1ecadbbd118d


mvn sonar:sonar \
  -Dsonar.projectKey=friendly_ecommerce \
  -Dsonar.host.url=http://localhost:9000 \
  -Dsonar.login=sqp_72b495fa33256b05d6766bb9314b1ecadbbd118d



Logstash starts
   â†“
Reads logstash.yml
   â†“
Authenticates to ES (license, monitoring)
   â†“
Startup OK?
   â†“
Loads pipelines
   â†“
Pipelines authenticate again (for data)



Access Requirement	User	Response
permitAll()	anonymous	200 OK
authenticated()	anonymous	403 Forbidden
hasRole("USER")	anonymous	403 Forbidden
authenticated()	invalid token	401 Unauthorized
hasRole("USER")	valid token, wrong role	403 Forbidden
